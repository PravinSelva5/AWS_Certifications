# Cloud Monitoring

Created: Nov 7, 2020 11:17 AM

## CloudWatch Metrics

- **Metric** is a variable to monitor
- **Metrics** have **timestamps**
- You can create **CloudWatch dashboards** of metrics

## CloudWatch Alarms

- Alarms are used to trigger notifications for any metric
- Alarm actions:
    - Auto Scaling
    - EC2 Actions
    - SNS notifications

## CloudWatch Logs

- Can collect from:
    - Elastic beanstalk
    - ECS : collection from containers
    - AWS Lambda
    - Cloudtrail based on filter
    - CloudWatch log agents: on EC2 machines or on-premises servers
    - Route53: Log DNS queries
- Enables **real-time monitoring** logs
- Adjustable CloudWatch Logs **retention**
- **You need to run a CloudWatch agent on EC2 to push the log files you want. IAM PERMISSIONS NEED TO BE CORRECT. (SAME WITH ON-PREMISES)**

## CloudWatch Events / EventBridge

![Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled.png](Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled.png)

### Amazon EventBridge

- EventBridge is the next evolution of CloudWatch Events.
- **Default event bus:** generated by AWS services
- **Partner event bus:** receive events from SaaS service or applications
- **Custom Event buses:** for your own applications
- **Schema Registry:** model event schema
- CloudWatch == EventBridge.
    - CloudWatch will probably be replaced with EventBridge soon

## AWS CloudTrail

- provides governance, compilance and audit for your AWS Account
- CloudTrail is **enabled by default**
- Get **a history of events / API calls made within your AWS Account** by:
    - Console
    - SDK
    - CLI
    - AWS Services
- Can put logs from CloudTrail into CloudWAtch Logs or S3
- **A trail can be applied to All Regions (default) or a single Region**
- If a resource is deleted in AWS, **investigate CloudTrail FIRST**

![Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled%201.png](Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled%201.png)

## AWS X-Ray

- With X Ray, you're able to do tracing and have a **visual analysis of our applications**
- Pros:
    - **Troubleshooting performance**
    - **Understand dependencies in a microservice architecture**
    - **Pinpoint service issues**
    - **Review request behaviour**
    - **Find errors and exceptions**
    - ***Are we meeting SLA (Service Level Agreement)? Where I am throttled?***
    - **Identify users that are impacted**

## Service Health Dashboard

- show's the health of all services & regions
- Show's historical information for each day

## Personal Health Dashboard

- this dashboard provides **alerts and remediation guidance** when AWS is experiencing **events that may impact you**
- You get a personalized view of the services you are using based off performances & availability

## Monitoring Summary

![Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled%202.png](Cloud%20Monitoring%20f687bc0856f743268f4689eff6437cab/Untitled%202.png)

## Questions & Answers

1. The CloudWatch Alarms feature allows you to watch CloudWatch metrics and to receive notifications when the metrics fall outside of the levels (high or low thresholds) that you configure.
2. AWS X-Ray helps developers analyze and debug production, distributed applications, such as those built using a microservices architecture.
3. AWS Personal Health Dashboard provides alerts and remediation guidance when AWS is experiencing events that may impact you.
4. Amazon CloudWatch is a monitoring service for AWS cloud resources and the applications you run on AWS. You can use Amazon CloudWatch to collect and track metrics, collect and monitor log files, and set alarms.
5. AWS CloudTrail is a web service that records activity made on your account and delivers log files to your Amazon S3 bucket. AWS CloudTrail is a service that enables governance, compliance, operational auditing, and risk auditing of your AWS account.
6. You can use Amazon CloudWatch Logs to monitor, store, and access your log files from Amazon Elastic Compute Cloud (Amazon EC2) instances, AWS CloudTrail, Route 53, and other sources. **A single, highly scalable service that centralizes the logs from all of your systems, applications, and AWS services that you use.**
7. CloudTrail can record the history of events/API calls made within you AWS account, which will help determine who or what deleted the resource. You should investigate it first.